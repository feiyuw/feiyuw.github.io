<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[张裕的博客]]></title>
  <subtitle><![CDATA[大音希声，大象希行]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://feiyuw.github.io/"/>
  <updated>2014-08-17T23:05:26.195Z</updated>
  <id>http://feiyuw.github.io/</id>
  
  <author>
    <name><![CDATA[feiyuw]]></name>
    <email><![CDATA[feiyuw@gmail.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Travis CI架构分析]]></title>
    <link href="http://feiyuw.github.io/2014/08/17/Travis-CI%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90/"/>
    <id>http://feiyuw.github.io/2014/08/17/Travis-CI架构分析/</id>
    <published>2014-08-17T14:30:09.000Z</published>
    <updated>2014-08-17T11:53:42.246Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;[TODO]</p>
]]></content>
    
    
      <category term="持续集成" scheme="http://feiyuw.github.io/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
      <category term="Ruby On Rails" scheme="http://feiyuw.github.io/tags/Ruby-On-Rails/"/>
    
      <category term="软件开发" scheme="http://feiyuw.github.io/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[恽之玮、张竞璡以及当年常州中学的教改班]]></title>
    <link href="http://feiyuw.github.io/2014/08/17/%E6%81%BD%E4%B9%8B%E7%8E%AE%E3%80%81%E5%BC%A0%E7%AB%9E%E7%92%A1%E4%BB%A5%E5%8F%8A%E5%BD%93%E5%B9%B4%E5%B8%B8%E5%B7%9E%E4%B8%AD%E5%AD%A6%E7%9A%84%E6%95%99%E6%94%B9%E7%8F%AD/"/>
    <id>http://feiyuw.github.io/2014/08/17/恽之玮、张竞璡以及当年常州中学的教改班/</id>
    <published>2014-08-17T11:59:33.000Z</published>
    <updated>2014-08-17T23:05:21.466Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;前几天，同学在微信朋友圈分享了一个链接，是一个北大的学生描写恽之玮的。这个链接是：<a href="http://blog.sina.com.cn/s/blog_760105a30101el7c.html" target="_blank" rel="external">学友眼中的大神——恽之玮究竟有多强</a>，百度百科上关于恽之玮的词条为: <a href="http://baike.baidu.com/view/10870579.htm?fr=aladdin。" target="_blank" rel="external">http://baike.baidu.com/view/10870579.htm?fr=aladdin。</a></p>
<p>&emsp;&emsp;同学的这条微信一下把我拉回了十几年前，那时候我还在读高中，和恽之玮同一个学校，同一个年纪，甚至 同一个数学老师和同一个体育老师。我对他的印象是：一个有点木木的，经常待在图书馆，偶尔打打篮球，跳远还不错。</p>
<p>&emsp;&emsp;恽之玮是省常中教改班的学生，教改班对我们来讲确实是神一级的存在，班平均有可能超过我们的最高分，经常垄断年级前十，多个数学、物理、化学、计算机竞赛的一等奖，多人保送清华和北大。在接近三分之一的学生被保送后，剩下的学生高考平均分超过一本线80多分……</p>
<p>&emsp;&emsp;我之后再没有遇到这么多聪明的头脑聚在一起。</p>
<p>&emsp;&emsp;那届教改班里我印象最深的是张竞璡，他和恽之玮同样进入了数学冬令营，化学、物理，貌似计算机竞赛都拿了一等奖，还有年级第一，最后保送清华。这个人很阳光，篮球和跳高都不错。他好像什么都学一点，什么都做一点，都还挺不错，学习能力是令人高山仰止的存在。我不知道现在的张竞璡在做什么，百度上搜不到他的近况，估计至少在数学领域，他是很难达到恽之玮的高度了。</p>
<p>&emsp;&emsp;打个不恰当的比方，这两个人就像《天龙八部》里面的北乔峰、南慕容。一个刻苦钻研武学，精益求精，另一个聪明绝顶，博学百家。然而若论武学的造诣，就略有逊色了。那么到底哪一个更好呢？笔者认为哪条路能带给自己更多的快乐，哪条路就更好。</p>
<p>&emsp;&emsp;这里我想大概谈一谈这个教改班的组成，当时的省常中没有严格意义上的初中部，但是每届会招收两个班的教改班。生源的范围就是常州市区的几所最好的小学。常州是个弹丸小城，市区的范围也就几十万人口吧。教改班的教学和一般的初中不一样，更注重个性的发展，也不拘泥于大纲，教材也是自选的。这个班的学生被人理所当然的认为是常州最好的初中生。他们中有一半人可以不经中考进入省常中，另一半则要参加中考。高中的教学差别就不太大了，基本和别的班差不多。</p>
<p>&emsp;&emsp;我不认为这么小范围里选出来的学生有如此高的天赋，这种概率太小了，但是他们独特的初中教育，竞争机制和荣誉感，可能是他们超越其他同龄人的原因。如果我们的初中，能够遇到高中那样的一群同学和老师，也会大不一样吧。</p>
<p>&emsp;&emsp;那个时候人与人的交流方式还是比较传统的，在现在交流工具铺天盖地的情况下，想找到这么一群人一起成长，应该不再是梦想了。</p>
]]></content>
    
    
      <category term="数学" scheme="http://feiyuw.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="教育" scheme="http://feiyuw.github.io/tags/%E6%95%99%E8%82%B2/"/>
    
      <category term="教育" scheme="http://feiyuw.github.io/categories/%E6%95%99%E8%82%B2/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[臭豆腐]]></title>
    <link href="http://feiyuw.github.io/2014/08/17/%E8%87%AD%E8%B1%86%E8%85%90/"/>
    <id>http://feiyuw.github.io/2014/08/17/臭豆腐/</id>
    <published>2014-08-17T07:02:03.000Z</published>
    <updated>2014-08-17T11:51:58.680Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;一直想写一篇关于臭豆腐的文章，但是就像很多人第一次吃臭豆腐的纠结一样，笔者迟迟没有定下标题，定下大意，也就一直没有落笔。直到最近看了一篇汪曾琪先生写的散文《五味》。</p>
<p>&emsp;&emsp;汪曾琪先生的作品是那个时代的作家里面为数不多的我认为值得一读的之一，其他的有曹禹的话剧、鲁迅的《故事新编》等。想想汪老的一生，从南到北，从东到西，历经民国、抗战、解放战争、文革以及文革后的各个时期，挨过批斗，受过饥荒，然而读他的作品，里面流露的总是恬静和平和，看他描写各地的美食，有时仿佛能看到一个老人的顽童心性。他的作品，往往描写一些生活细节，写什么就是什么，我又何必纠结于什么大意和主题呢？</p>
<p>&emsp;&emsp;汪老在《五味》里面对于中国人的吃臭的口味有一段描写，摘录如下： </p>
<p><em>我不知道世界上还有什么国家的人爱吃臭。</em><br><em>过去上海、南京、汉口都卖油炸臭豆腐干。长沙火宫殿的臭豆腐因为一个大人物年轻时常吃而出名。这位大人物后来还去吃过，说了一句话：“火宫殿的臭豆腐还是好吃。”文化大革命中火宫殿的影壁上就出现了两行大字：</em></p>
<p><em>最高指示：</em><br><em>火宫殿的臭豆腐还是好吃。</em></p>
<p><em>我们一个同志到南京出差，他的爱人是南京人，嘱咐他带一点臭豆腐干回来。他千方百计，居然办到了。带到火车上，引起一车厢的人强烈抗议。</em><br><em>除豆腐干外，面筋、百叶（千张）皆可臭。蔬菜里的莴苣、冬瓜、豇豆皆可臭。冬笋的老根咬不动，切下来随手就扔进臭坛子里。我们那里很多人家都有个臭坛子，一坛子“臭卤”。腌芥菜挤下的汁放几天即成“臭卤”。臭物中最特殊的是臭苋菜杆。苋菜长老了，主茎可粗如拇指，高三四尺，截成二寸许小段，入臭坛。臭熟后，外皮是硬的，里面的芯成果冻状。嚼住一头，一吸，芯肉即入口中。这是佐粥的无上妙品。我们那里叫做“苋菜秸子”，湖南人谓之“苋菜咕”，因为吸起来“咕”的一声。</em><br><em>北京人说的臭豆腐指臭豆腐乳。过去是小贩沿街叫卖的：</em><br><em>“臭豆腐，酱豆腐，王致和的臭豆腐。”臭豆腐就贴饼子，熬一锅虾米皮白菜汤，好饭！现在王致和的臭豆腐用很大的玻璃方瓶装，很不方便，一瓶一百块，得很长时间才能吃完，而且卖得很贵，成了奢侈品。我很希望这种包装能改进，一器装五块足矣。</em><br><em>我在美国吃过最臭的“气死”（干酪），洋人多闻之掩鼻，对我说起来实在没有什么，比臭豆腐差远了。</em><br><em>甚矣，中国人口味之杂也，敢说堪为世界之冠。</em></p>
<p>&emsp;&emsp;确实，对于老外来说，臭豆腐这种食物实在太奇特了，以至于常常会怀疑第一个尝试吃它的人是一种什么心态。我特地在百度百科查了一下臭豆腐的由来，传说如下：</p>
<p><em>相传清朝康熙八年，由安徽黄山来京赶考的王致和金榜落第，闲居在会馆中，欲返归故里，交通不便，盘缠皆无，欲在京攻读，准备再次应试，又距下科试期甚远。无奈，只得在京暂谋生计。王致和的家庭原非富有，其父在家乡开设豆腐坊，王致和幼年曾学过做豆腐，于是便在安徽会馆附近租赁了几间房，购置了一些简单的用具，每天磨上几升豆子的豆腐，沿街叫卖。时值夏季，有时卖剩下的豆腐很快发霉，无法食用，但又不甘心废弃。他苦思对策，就将这些豆腐切成小块，稍加晾晒，寻得一口小缸，用盐腌了起来，之后歇伏停业，一心攻读，渐渐地便把此事忘了。</em><br><em>秋风飒爽，王致和又想重操旧业，再做豆腐来卖。蓦地想起那缸腌制的豆腐，赶忙打开缸盖，一股臭气扑鼻而来，取出一看，豆腐已呈青灰色，用口尝试，觉得臭味之余却蕴藏着一股浓郁的香气，虽非美味佳肴，却也耐人寻味，送给邻里品尝，都称赞不已。</em><br><em>王致和屡试不中，只得弃学经商，按过去试做的方法加工起臭豆腐来。此物价格低廉，可以佐餐下饭，适合收入低的劳动人食用，所以渐渐打开销路，生意日渐兴隆。后经辗转筹措，在延寿街中间路西购置了一所铺面房，自产自销，批零兼营。据其购置房屋的契约所载，时为康熙十七年冬。从王致和创造了独一无二的臭豆腐以后，又经多次改进，逐渐摸索出一套臭豆腐的生产工艺，生产规模不断扩大，质量更好，名声更高。清朝末叶，传入宫廷。传说慈禧太后在秋末冬初也喜欢吃它，还将其列为御膳小菜，但嫌其名称不雅，按其青色方正的特点，取名“青方”。</em></p>
<p>&emsp;&emsp;此传说真假已很难考据，不过从中大体可以看出中国很多特色美食（如皮蛋、如捆蹄）的一个发明特点：从失误中来，由平民中来。而为了推广，又往往会附会上皇家贡品，往往都与慈禧、乾隆、康熙搭点边，这里面的例子如苏州的松鹤楼、常州的萝卜干以及这个臭豆腐。</p>
<p>&emsp;&emsp;不负责任地YY一下，吃臭豆腐有时也能体现一个人的行为偏好，在大家都不知道这个东西味道如何的时候，第一个尝试的人往往具有开拓精神，适合创业；在有人称赞，有人贬低的时候，不盲从而去尝试一下的人，往往更务实和独立。</p>
<p>&emsp;&emsp;我也喜欢吃臭豆腐，但什么时候开始吃已经记不得了，小时候吃臭豆腐的记忆都是卖豆腐的师傅的自行车上的一个小桶。一毛钱一块，买上十几块就可以烧一盆了。</p>
<p>&emsp;&emsp;我差不多从小到大一直买的同一个人的豆腐。</p>
<p>&emsp;&emsp;这个卖豆腐的师傅比我爸大个几岁，从我记事起每天就骑着一辆28寸的大自行车走村窜巷。他的自行车后架上做了个支架，两边各挂一个大桶，上面垒两个木格，木桶里面冬、春、秋三季卖的是豆腐，夏季卖的是豆腐脑和凉粉。木格里面冬、春、秋三季多是百叶和豆腐干，夏季则搁上一桶臭豆腐。那时候每年暑假，早晨听到外面“卖豆腐”的叫卖声，我便会抓起一个搪瓷盆飞快地跑出门去，买上2块钱臭豆腐，或是3毛钱豆腐脑，作菜或是烧汤，夏日的一天都会觉得清爽。</p>
<p>&emsp;&emsp;这个臭豆腐买了十几个暑假，直到我大学时候。最后一次在这个师傅那里买臭豆腐是我大二的暑假了，那时候他已经很少做豆腐卖豆腐了，年龄大了，生活也好了，那一次我买完豆腐，跟他聊了好久，他的儿子在烟草公司工作，家里开了家香烟店，经济状况看的出来已经很不错了。临了他跟我说：“我今年已经不卖豆腐了，但是现在暑假了，想想你也该回家了，就出来转转。”</p>
<p>&emsp;&emsp;后来搬家了，我再也没有见过他。</p>
<p>&emsp;&emsp;这是一个很好的人，亦如他做的盐卤豆腐。</p>
]]></content>
    
    
      <category term="美食" scheme="http://feiyuw.github.io/tags/%E7%BE%8E%E9%A3%9F/"/>
    
      <category term="读书" scheme="http://feiyuw.github.io/tags/%E8%AF%BB%E4%B9%A6/"/>
    
      <category term="读书" scheme="http://feiyuw.github.io/categories/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[书评：颠覆笑傲江湖、动物农场、伐清、大教堂与市集]]></title>
    <link href="http://feiyuw.github.io/2014/08/11/%E4%B9%A6%E8%AF%84%EF%BC%9A%E9%A2%A0%E8%A6%86%E7%AC%91%E5%82%B2%E6%B1%9F%E6%B9%96%E3%80%81%E5%8A%A8%E7%89%A9%E5%86%9C%E5%9C%BA%E3%80%81%E4%BC%90%E6%B8%85%E3%80%81%E5%A4%A7%E6%95%99%E5%A0%82%E4%B8%8E%E5%B8%82%E9%9B%86/"/>
    <id>http://feiyuw.github.io/2014/08/11/书评：颠覆笑傲江湖、动物农场、伐清、大教堂与市集/</id>
    <published>2014-08-11T01:46:27.000Z</published>
    <updated>2014-08-12T02:05:52.044Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;最近一个月看了几本书，有网络小说，如《伐清》、《颠覆笑傲江湖》，有讽刺小说，如《动物农场》，还有开源运动的经典书籍《大教堂与市集》。这里写一些简单的书评，权当回顾吧。</p>
<h2 id="伐清：灰熊猫的明清历史观点">伐清：灰熊猫的明清历史观点</h2>
<p>&emsp;&emsp;总的来讲，《伐清》是一本还不错的网络小说，如果没有看过《窃明》和《虎狼》，这本书会带给你明末清初历史的很多新奇的视角。作者以全新的视角来探讨南明王朝逆袭的可能性，并且以通俗的方式揭示帝国主义的一些行为准则。不过从整体情节来讲，个人认为不如《窃明》，但也值得一看。这里摘录其中的一段。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>“提督，”在战争的前夜，任堂突然又问邓名道：“帝国的意思，是不是就是强盗？”

“当然不是，”邓名没想到任堂居然会有这么荒唐的念头，大不以为然地问道：“你怎么会有这样的想法？”

“提督教导军官们要为了钱而打仗——这不就是强盗嘛，然后说这样的强盗军队就叫帝国部队；
提督计划建立一个强盗分赃会，打算把它命名为帝国议会；而所有强盗都要遵守的规矩，就叫帝国宪法。”
任堂已经考虑了这个问题好几天了，他自信地说道：“那帝国不就是强盗的意思嘛。”
</pre></td></tr></table></figure>

<h2 id="颠覆笑傲江湖：笑傲江湖的月关改进版">颠覆笑傲江湖：笑傲江湖的月关改进版</h2>
<p>&emsp;&emsp;《颠覆笑傲江湖》是月关早期的作品，逻辑比较严密，很多细节处理得比较好，如对营救任我行的描写，个人认为逻辑性上远比金庸的原著严密。应该说这是一部比较奇特的小说，更像是对《笑傲江湖》这部经典的优化和改进。</p>
<h2 id="动物农场：这就是真实的社会主义？">动物农场：这就是真实的社会主义？</h2>
<p>&emsp;&emsp;《动物农场》是乔治·奥维尔的作品，作者以一个农场的动物赶跑农场主自治开始，狠狠地讽刺了一把社会主义的苏联，当然了，对我国人们来讲，里面的很多场景都能带来联想，如特供，如阶级斗争，这里摘录该书的结尾部分。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>但是他们走开还没有超过二十码距离，又骤然站住。好多条嗓子大吵大嚷的喧哗声从农场主宅内传来。
动物们赶回去重又朝窗内张望。没错儿，一场激烈的争吵正在进行中。那里边有破口大骂的，有拍桌子的，
有犀利的目光怀疑对方作弊的，有气急败坏矢口否认的。翻脸的缘起好像是拿破仑和皮尔金顿先生同时都打出一张黑桃<span class="literal">A</span>。
十二条嗓门暴跳如雷地吼叫，声音全都一个样。这下弄明白了，猪们的脸究竟出了什么问题。
敢情动物们从窗外朝里望，目光从猪移到人，再从人移到猪，又重新从猪移到人，要分清哪张脸是猪的，
哪张脸是人的，已经不可能了。
</pre></td></tr></table></figure>

<h2 id="大教堂与市集：拥抱开源">大教堂与市集：拥抱开源</h2>
<p>&emsp;&emsp;《大教堂与市集》是Eric.S.Raymond关于开源运动的一部纲领性大作，他对如火如荼的开源运动做了总结和理论升华，如果你没有接触过开源，或者你的经理正在用某些已经被证实是错误的方式来管理团队，建议他读一下此书，你会有很多收获的。同样摘录一段。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>6.把你的用户当成开发合作者对待，如果想让代码质量快速提升并有效排错，这是最省心的途径。

这种做法的效力很容易被低估，事实上，连我们这些在开源世界里的人，都极大低估了这种做法的效力，
也就是用户越多就越能有效对抗系统的复杂性，直到Linus Torvalds向我们明白地展示这一点。

我想，Linus最聪明和最有价值的成就其实不是构建出一个Linux内核，而是他发明的这种Linux开发模式。
有一次我当面向他表达了这个看法，他笑了，平静地重复了他常说的话：“我基本上是个很懒的人，别人做事，
我得名誉。”像狐狸那样懒，或者像Robert Heinlein曾经描绘的一个很有名的角色，太懒以至于无所不能。
</pre></td></tr></table></figure>
]]></content>
    
    
      <category term="读书" scheme="http://feiyuw.github.io/tags/%E8%AF%BB%E4%B9%A6/"/>
    
      <category term="读书" scheme="http://feiyuw.github.io/categories/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[我家女儿三岁半]]></title>
    <link href="http://feiyuw.github.io/2014/08/11/%E6%88%91%E5%AE%B6%E5%A5%B3%E5%84%BF%E4%B8%89%E5%B2%81%E5%8D%8A/"/>
    <id>http://feiyuw.github.io/2014/08/11/我家女儿三岁半/</id>
    <published>2014-08-11T01:19:55.000Z</published>
    <updated>2014-08-11T06:37:10.810Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;女儿已经三岁半了，从老婆怀孕到她出生，再到学会走路，学会说话，去托班上学。这四年多的时间，随着女儿的加入，我们也改变了很多。</p>
<p>&emsp;&emsp;这里就简单记录一件小事吧，权当留作老来幸福的回忆。</p>
<p>&emsp;&emsp;昨天晚上到了睡觉的时间了，女儿跑过去关掉灯，然后趴在我旁边，过了几秒中，她对我说：“爸爸，我睡不着。”。我回答：“睡不着的话坐起来跟爸爸聊聊天吧。”</p>
<p>&emsp;&emsp;然后女儿给我出了个题：“爸爸，给我讲个故事吧？”，“什么故事？”，“大猩猩对付大灰狼的故事”。各位，如果你们碰到这个问题，你们会怎么讲？昨天我是这么编的：</p>
<p>&emsp;&emsp;话说在很久很久以前（故事都是这么开头的不是？其实这是为了给自己多点编故事的时间），那时候是中国的春秋战国时期（有点谱了），在当时的郑国这个地方，生活着一个小宝宝（基本上故事的主角都是小宝宝，当然后来有长大的）。小宝宝经常去家附近的森林里玩，在那里他有一个好朋友，是一只跟他差不多大的小猩猩，他们经常一起玩耍，一起捉迷藏（除了大灰狼，都出来了，后面就好编了）。</p>
<p>&emsp;&emsp;小宝宝和小猩猩慢慢地长大了，他们依然经常在一起玩耍，依然是好朋友，只是见面的次数比以前少了。</p>
<p>&emsp;&emsp;然而这个时候发生了一件事情（故事总得有转折的嘛），郑国开始打仗了，长大后的小宝宝，这个时候要称他为小伙子了。小伙子被抽壮丁抓走了，他们要到很远的地方去与秦国军队打仗（春秋战国时期嘛，当然战争是最容易想到的了）。</p>
<p>&emsp;&emsp;小伙子随着部队来到了郑国的边界，那里的郑国军队正和秦军激烈地战斗。但是他们的加入没有影响战争的走势，郑国还是失败了。小伙子连续跑了好几天，才从战场上逃出来。可这个时候他已经又累又饿，在一个树林里坐下后，一下就睡着了（编得还算圆吧？）。</p>
<p>&emsp;&emsp;也不知道过了多久，小伙子慢慢地醒过来了，心想这个时候怎么可以睡着了呢。他一转身，赫然发现旁边不远处躺着一条大灰狼，已经被打死了，在大灰狼的不远处，有一个巨大而熟悉的身影——那是大猩猩（故事的第一阶段编完了）。</p>
<p>&emsp;&emsp;原来大猩猩发现小伙子被抓走了，就一路跟了过来，正好碰到大灰狼想吃掉睡着的小伙子，大猩猩用他有力的拳头就把大灰狼给打趴下了。</p>
<p>&emsp;&emsp;按照我原先的打算，这个故事到这里就算结束了，这个时候女儿也安安静静地睡在那里，我以为她已经睡着了。可是，可能是看到我没有再讲了，女儿突然说了句：“爸爸，继续讲啊”。好吧，那我继续编。</p>
<p>&emsp;&emsp;小伙子和大猩猩一路躲避着追兵往家走（是不是有点像大兵小将？事实上这个时候我是在琢磨接下来说啥），他们经常隐藏在树林里，等晚上再出来赶路。两个人靠采野果和抓鱼为生，他们通常一个人去采野果，另一个就去抓鱼（是不是像两个人了而不是人和猩猩了？不好编啊）。</p>
<p>&emsp;&emsp;这一天，轮到大猩猩去采野果，小伙子去抓鱼，可是小伙子抓完鱼回来等了好久，还没有看到大猩猩，看来大猩猩多半遇到麻烦了。小伙子沿着树林边缘寻找，发现前面有一大队士兵押着很多大车在往前走，大车上装着很多一些木头笼子，里面关着老虎、犀牛等各种大型动物，当然还有大猩猩。</p>
<p>&emsp;&emsp;小伙子悄悄地跟在队伍后头，准备到晚上找机会救出大猩猩。到了晚上，队伍走到了一个峡谷的入口，他们在这里扎下营寨，把大车围了一圈，阻挡敌人和野兽的袭击。小伙子悄悄地摸到大车旁边，看到每个大木笼都被锁链牢牢地锁住了，小伙子需要找到钥匙才能把木笼打开。可能是天无绝人之路，带着木笼钥匙的那个士兵就睡在木笼的旁边不远处，他的钥匙耷拉在地上，发出阵阵地鼾声。小伙子蹑手蹑脚地走过去，偷偷拿走了钥匙，打开了大猩猩的木笼，然后他又打开了其它的木笼。等到士兵发现动物逃走的时候，他们已经跑出去很远了。</p>
<p>&emsp;&emsp;小伙子和大猩猩千辛万苦回到了家乡，可是家乡已经被秦军占领了，他们只能继续往山里面躲，沿途遇到其他的人和动物，最后，他们在深山里找到了一个盆地，在那里生活了下来（天坑，最近女儿看爸爸去哪儿比较多，这个容易理解）。</p>
<p>&emsp;&emsp;这是我第二次打算结束整个故事，然后女儿又来了一句：“爸爸，接下来怎么样了呢？”，能怎么样呢？接着往下编吧，她怎么还没睡着啊？</p>
<p>&emsp;&emsp;故事的第三段就是桃花源记，有一个渔夫误入桃花源（当然了，就是小伙子、大猩猩以及其他的村民一起逃进去的那个地方），看到这个地方的人们还保留着几百年前的衣着和习惯，才知道他们是躲避战争过来的。渔夫住了几天后告辞，沿途留下记号，报告官府，但是回来找的时候却怎么也找不到了。</p>
<p>&emsp;&emsp;第三段故事结束，回头看女儿已经睡着了。</p>
<p>&emsp;&emsp;最后给各位再出几个题（当然都是女儿给我出的）：</p>
<ul>
<li>小母鸡在大草原上下蛋</li>
<li>小母鸡在沙漠里下蛋</li>
<li>小蛇和大猩猩的故事</li>
</ul>
<p>&emsp;&emsp;期待你们的答案！</p>
]]></content>
    
    
      <category term="家庭" scheme="http://feiyuw.github.io/tags/%E5%AE%B6%E5%BA%AD/"/>
    
      <category term="女儿" scheme="http://feiyuw.github.io/tags/%E5%A5%B3%E5%84%BF/"/>
    
      <category term="家庭" scheme="http://feiyuw.github.io/categories/%E5%AE%B6%E5%BA%AD/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[基于gitlab merge request的持续集成]]></title>
    <link href="http://feiyuw.github.io/2014/08/06/%E5%9F%BA%E4%BA%8Egitlab-merge-request%E7%9A%84%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    <id>http://feiyuw.github.io/2014/08/06/基于gitlab-merge-request的持续集成/</id>
    <published>2014-08-06T06:30:41.000Z</published>
    <updated>2014-08-11T08:39:44.454Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;Gitlab可以认为是github的开源实现，基于它来构建开发流程可以带给我们类似github的体验，尤其是基于merge request进行测试和代码评审，是开发者间合作的一种很好的方式。本文就谈一下怎么基于gitlab merge request来进行持续集成和工作。</p>
<p>&emsp;&emsp;先谈一下我们用到的工具：</p>
<ul>
<li>Jenkins</li>
<li>git plugin</li>
<li>gitlab merge request builder plugin</li>
</ul>
<p>&emsp;&emsp;然后准备一台Linux的PC用来安装Jenkins就可以了。</p>
<h2 id="第一步：获取Jenkins，启动Jenkins">第一步：获取Jenkins，启动Jenkins</h2>
<ol>
<li>从 <a href="http://jenkins-ci.org" target="_blank" rel="external">http://jenkins-ci.org</a> 上下载最新的jenkins.war文件</li>
<li>java -jar jenkins.war启动Jenkins，可以添加一下启动参数，设置端口和log地址等，如我实际使用的启动脚本如下：<figure class="highlight sh"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="shebang">#!/bin/bash
</span>
<span class="keyword">export</span> JENKINS_HOME=/opt/jenkins_home/
java -Duser.timezone=<span class="string">"Asia/Shanghai"</span> -Dorg.apache.commons.jelly.tags.fmt.timeZone=<span class="string">'Asia/Shanghai'</span> -jar /opt/jenkins_home/jenkins.war --daemon --prefix=/jenkins --logfile=/opt/jenkins_home/logs/jenkins.log
</pre></td></tr></table></figure></li>
<li>打开 <a href="http://localhost:8080/jenkins" target="_blank" rel="external">http://localhost:8080/jenkins</a> 来使用它</li>
</ol>
<h2 id="第二步：安装git_plugin，gitlab_merge_request_builder_plugin">第二步：安装git plugin，gitlab merge request builder plugin</h2>
<ol>
<li>打开 <a href="http://localhost:8080/jenkins/pluginManager/" target="_blank" rel="external">http://localhost:8080/jenkins/pluginManager/</a> 选择Git Plugin和Gitlab Merge Request Builder Plugin，点击安装</li>
<li>重启jenkins</li>
<li>安装完成</li>
</ol>
<h2 id="第三步：全局配置">第三步：全局配置</h2>
<ol>
<li>打开 <a href="http://localhost:8080/jenkins/configure" target="_blank" rel="external">http://localhost:8080/jenkins/configure</a> ，配置<strong>Gitlab Merge Request Builder</strong></li>
<li>设置Gitlab Host URL为你的gitlab服务器地址</li>
<li>设置Jenkins Username，为你登录gitlab服务器的用户名</li>
<li>设置Jenkins API Token，必须和Jenkins Username匹配</li>
<li>其他设置默认就可以了</li>
</ol>
<p><img src="/images/gitlab_global.png" alt="gitlab全局配置"></p>
<h2 id="第四步：配置Job">第四步：配置Job</h2>
<ol>
<li>新建一个job，配置Git，见下图，除了Repository URL，其它照抄就可以了<br> <img src="/images/git_config.png" alt="git config"></li>
<li>配置Gitlab Merge Request Builder，注意设置Gitlab Project Path<br> <img src="/images/gitlab_mr_config.png" alt="gitlab merge request builder"></li>
</ol>
<h2 id="测试">测试</h2>
<ol>
<li>配置好测试的脚本和slave等，然后创建一个merge request，等待Jenkins的自动触发吧</li>
<li>一个配置正确的job，触发的历史记录类似下图<br> <img src="/images/gitlab_mr_builds.png" alt="gitlab builds"></li>
<li>某一个具体的build的触发情况如下图，可以看到触发源是gitlab merge request，源branch和目标branch的信息，以及commit版本信息等<br> <img src="/images/gitlab_mr_build_cause.png" alt="gitlab build detail"></li>
</ol>
]]></content>
    
    
      <category term="持续集成" scheme="http://feiyuw.github.io/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
      <category term="持续集成" scheme="http://feiyuw.github.io/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[工作在持续集成上]]></title>
    <link href="http://feiyuw.github.io/2014/08/06/%E5%B7%A5%E4%BD%9C%E5%9C%A8%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E4%B8%8A/"/>
    <id>http://feiyuw.github.io/2014/08/06/工作在持续集成上/</id>
    <published>2014-08-06T06:14:45.000Z</published>
    <updated>2014-08-11T06:35:53.983Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;最近这几年一直在与持续集成及其相关的工作打交道，包括我自己的日常工作，目前也在这个工作模式里面进行。这篇博客想通过一天的工作来聊一下这种工作模式，它的优点以及弊端。</p>
<h2 id="什么是持续集成">什么是持续集成</h2>
<p>&emsp;&emsp;摘录自Martin Fowler的<a href="http://www.martinfowler.com/articles/continuousIntegration.html" target="_blank" rel="external">大作</a>：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>Continuous Integration <span class="keyword">is</span> a software development practice <span class="keyword">where</span> members <span class="keyword">of</span> a team integrate their 
work frequently, usually each person integrates <span class="keyword">at</span> least daily - leading <span class="keyword">to</span> multiple integrations 
per <span class="property">day</span>. Each integration <span class="keyword">is</span> verified <span class="keyword">by</span> an automated build (including test) <span class="keyword">to</span> detect integration 
errors <span class="keyword">as</span> quickly <span class="keyword">as</span> possible. Many teams find <span class="keyword">that</span> this approach leads <span class="keyword">to</span> significantly reduced 
integration problems <span class="keyword">and</span> allows a team <span class="keyword">to</span> develop cohesive software more rapidly. This article <span class="keyword">is</span> 
a quick overview <span class="keyword">of</span> Continuous Integration summarizing <span class="keyword">the</span> technique <span class="keyword">and</span> <span class="keyword">its</span> current usage.
</pre></td></tr></table></figure>

<p>&emsp;&emsp;简而言之，持续集成就是让项目团队中的每一个人都尽可能频繁地把他们的工作集成到产品中进行验证，获得反馈的一种工作模式。</p>
<h2 id="在持续集成中工作">在持续集成中工作</h2>
<p>&emsp;&emsp;在这里笔者描述一下一天的工作情况。笔者所在的团队很小，所做的工作以开发内部工具为主，采用gitlab来管理代码和issue，以及进行code review。</p>
<p>&emsp;&emsp;早上到公司，第一件事一般是打开邮箱，查看有没有新的code review请求发过来。如果有的话，会在打开对应的merge request，进行code review，gitlab会自动把这些review结果发送给其他人。处理完这些事情后，如果有未做完的issue，会接着昨天的工作继续开发。如果昨天的issue已经结束并通过review，则会在gitlab上找下一个优先级的issue，将它的assiner改成自己，然后为这个issue创建分支，开始在这个分支上进行开发。</p>
<p>&emsp;&emsp;通常情况下，上午的两三个小时时间主要用在code review和日常的交流回复上面，下午4：00前是主要的开发时间，在本地UT通过后，就会提交到gitlab上。然后创建一个merge request，这个时候CI系统会侦测到这次提交，并自动执行单元测试，代码静态分析等，如果其中一个测试失败，笔者会收到相关的邮件。然后就是修复这些问题，再次提交。</p>
<p>&emsp;&emsp;下班前的半个小时是组内的日常会议时间，主要是交流各自进度和遇到的问题。</p>
<p>&emsp;&emsp;如果所选的issue开发已经结束，并且通过CI系统测试，就会发一个code review的请求给组内其他同事，开启review环节。</p>
<p>&emsp;&emsp;如果有相关的issue在code review都已经结束，则会在gitlab上关闭merge request，这个时候代码会自动合并到master分支，并在5分钟以内被部署到生产环境上。</p>
<h3 id="工作在持续集成中的特点">工作在持续集成中的特点</h3>
<ol>
<li>源代码管理工具，如git，svn等</li>
<li>持续集成工具，如Jenkins</li>
<li>频繁地代码提交和测试</li>
<li>细颗粒度的issue管理，保证每一个issue的开发周期在一两天完成</li>
<li>流程自动化的code review</li>
<li>自动和频繁的代码合并和部署</li>
</ol>
<h2 id="持续集成的优与劣">持续集成的优与劣</h2>
<h3 id="优点">优点</h3>
<p>&emsp;&emsp;持续集成的优点是比较明显的，频繁的提交带来频繁地集成，把代码问题的暴露大大提前了，并且由于流程的自动化，让开发者更好地关注于开发本身。</p>
<p>&emsp;&emsp;对于较大的项目，或者开发者分散的项目，好的持续集成策略能够极大地降低沟通成本和集成成本。</p>
<h3 id="风险">风险</h3>
<p>&emsp;&emsp;采用持续集成需要维护的工具较多，至少包括源代码管理工具如git，持续集成工具如Jenkins，并且需要制定相应的规则保证每一个持续集成job都正确地工作。这中间需要较多地沟通和适应成本，对于一个开发频率不高的项目，这种做法性价比不高。</p>
<p>&emsp;&emsp;并不是有git和jenkins就可以称为持续集成的，要完整地搭建一套可工作的持续集成框架，需要研发测试等各个组织的努力，如果处理不好，可能适得其反。</p>
<h3 id="基于gitlab的持续集成策略">基于gitlab的持续集成策略</h3>
<p>&emsp;&emsp;下图是笔者所在团队基于gitlab的持续集成策略，这里面的测试只有一轮，集成也只有一轮，对于更复杂的多轮集成的情况，我们后面再谈。</p>
<p><img src="/images/dev_process.png" alt="gitlab dev process"></p>
<h2 id="多轮持续集成模型">多轮持续集成模型</h2>
<p>&emsp;&emsp;如果产品比较复杂，如通信产品，单靠单元测试显然不能满足需求，这个时候往往会有多轮测试，并且在整个产品集成前后都会有单独的测试被执行。以笔者所在公司为例，一个通信产品往往能分为平台和应用等几大块，对每一块来说，产品交付到客户手中至少需要经历：单元测试、基于真实设备或模拟器的功能测试（编包前）、编包测试、编包后的基本功能测试、包的回归测试、系统集成测试等这几个环节。两个环节间的联系有的是代码的版本，有的则是包的版本。而越到测试的后期，测试的成本就越高，测试周期也越长。理想的情况是每一个阶段的集成测试都可以自动的转入下一阶段，并根据时间、频率等具体情况来决定测试频率，一个开发人员的代码提交可以在整个流程中被自动追溯，而产品的质量也可以在整个流程中被度量和追溯。而整个流程也就类似下图的continuous delivery或者continuous deployment了。</p>
<p><img src="/images/continuous_delivery.jpg" alt="continuous delivery"></p>
]]></content>
    
    
      <category term="持续集成" scheme="http://feiyuw.github.io/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
      <category term="持续集成" scheme="http://feiyuw.github.io/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[测试自动化方案的选择]]></title>
    <link href="http://feiyuw.github.io/2014/07/18/%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E5%8C%96%E6%96%B9%E6%A1%88%E7%9A%84%E9%80%89%E6%8B%A9/"/>
    <id>http://feiyuw.github.io/2014/07/18/测试自动化方案的选择/</id>
    <published>2014-07-18T09:08:38.000Z</published>
    <updated>2014-08-04T05:49:02.066Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;软件开发发展到今天，分工已经越来越细了，测试自动化也已成为很多组织所采用的重要测试手段。笔者这几年工作过的公司和组织，见过很多不同的开发和测试模式，以及很多的测试自动化解决方案，很多组织都花费了大量的时间进行测试自动化，但是真正取得良好效果的却不多。大部分的组织在这块都存在或这或那的问题。笔者希望在这里能够抛砖引玉，讨论一下测试自动化方案的选择问题。</p>
<h2 id="测试自动化是什么">测试自动化是什么</h2>
<p>&emsp;&emsp;什么是自动化测试？关于这个问题，我们可以找到很多的解答。百度百科上关于自动化测试的说明为：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>一般是指软件测试的自动化，软件测试就是在预设条件下运行系统或应用程序，评估运行结果，预先条件应包括正常条件和异常条件。
自动化测试是把以人为驱动的测试行为转化为机器执行的一种过程。
通常，在设计了测试用例并通过评审之后，由测试人员根据测试用例中描述的规程一步步执行测试，得到实际结果与期望结果的比较。
在此过程中，为了节省人力、时间或硬件资源，提高测试效率，便引入了自动化测试的概念。
</pre></td></tr></table></figure>

<p>&emsp;&emsp;从这个说明中，我们可以提炼几个关键词：</p>
<ul>
<li>节省资源</li>
<li>提高效率</li>
</ul>
<p>&emsp;&emsp;但是只有这两个目的吗？测试自动化实际上扩展了我们传统手工测试的边界，比如并发测试，手工的模拟某些情况下是不现实的。另外引入测试自动化，解放了测试的人力，同时也给测试人员提出了新的要求，这反过来往往会影响到我们的组织结构和人员构成，而由于测试自动化的快速反馈的特点，也会影响我们的发布流程和策略，进而影响到整个软件开发流程。因此，笔者认为，测试自动化还有两个重要的目的：</p>
<ul>
<li>提高测试覆盖率</li>
<li>优化工作流程</li>
</ul>
<p>&emsp;&emsp;因此，这里笔者大胆地给出一个定义：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>测试自动化，是在希望优化工作流程，提高工作效率，节省资源的组织里面，在测试这类工作上面所做的改变。
通过引入自动化，不但提高了测试效率和测试覆盖率，也提高了整个软件开发流程的效率。
同时，自动化的引入，也进一步模糊了开发和测试的界限，使敏捷成为可能。
</pre></td></tr></table></figure>

<h2 id="什么时候引入测试自动化">什么时候引入测试自动化</h2>
<p>&emsp;&emsp;在Michael Feathers的大作《Working Effectively with Legacy Code》里面对于开发的方式有两种描述：</p>
<ol>
<li>edit and pray</li>
<li>cover and modify</li>
</ol>
<p>&emsp;&emsp;我们显然不希望选择第一种方式，然而事实是即便在全球顶尖的公司里面，还有相当数量的组织和团队采用这种工作方式。程序员在写完代码的时候不知道他们的代码能不能工作，他们寄希望于独立的测试团队来验证整个产品的功能，以保证交付的质量。在这样的组织里面，可能会有一定程度的单元测试和持续集成，但是TDD（测试驱动开发）这样的模式是一定没有推广起来的。同时由于测试的分离，两个独立的组织间的沟通也是一个问题，甚至还有冲突。</p>
<p>&emsp;&emsp;尽管敏捷已经提出很多年了，我们不得不承认，还有很多的组织在用瀑布模型来进行软件开发，还有很多的管理层坚持测试组织的独立性。因此，作为工作在一线的员工，笔者没有奢望影响到管理层的决策和这么多人的习惯。我们今天就以不同的开发模式和人员组成，来看看什么时候适合引入测试自动化，或者说要不要引入测试自动化。</p>
<h3 id="小团队，没有或很少的测试人员">小团队，没有或很少的测试人员</h3>
<p>&emsp;&emsp;如果是初创的小团队，笔者觉得没有必要有独立的测试职位，这不仅仅是从节约资金上考虑，同时也是为了让所有的开发人员有一种产品意识。经常地去测试自己的产品，才能帮助自己开发出好的产品来。这种情况下，测试的消耗就要求尽可能地小和快了。笔者认为对于比较小的相对独立的项目，充分地单元测试加上少量的手工测试就可以了。如果项目有依赖，或者属于某一个大系统的一个子集，那集成层面的功能性测试就非常必要了，而且当项目变大之后，相关的功能模块越来越多，单元测试往往会无法覆盖某些关键路径。这种情况下，就必须要有全自动化的测试，并且每次代码提交后，只要过了单元测试和编译都去执行它。不能因为人员少或者缺少相关的背景而忽略掉测试，无路项目大小，单元测试都是必须的，而如果可预见的系统功能较多，那自动化功能测试也是必要的。小团队在制定流程上的灵活性，使得他们很容易切换工作模式，这种时候尝试一下TDD或者BDD，将会是非常美妙的一件事情。一旦我们驾驭了TDD和BDD，那我们会发现交付产品不再是一个让人忐忑的事情。</p>
<h3 id="有独立的测试组织的团队">有独立的测试组织的团队</h3>
<p>&emsp;&emsp;这样的团队往往比较大了，或者属于流程比较规范的公司，国内很多外包公司都乐于这么做。当测试组织独立的时候，我们需要避免一种情况的发生，这种情况在笔者工作过的公司见过很多次。当项目初步启动的时候，测试团队往往不知道做什么，他们会利用这段时间阅读需求文档等，但事实上这个时候的需求文档往往会在今后经历很多的变化。而到了项目后期，测试团队的压力变得非常大，他们需要加班加点保证所有的功能都被测试覆盖，没有死角。</p>
<p>&emsp;&emsp;独立的测试组织需要避免上述问题的发生，他们就必须尽早地加入到开发流程中去。笔者认为，最合适的方式，就是以测试用例来验证功能的交付。比如说，第一阶段研发开始，第一个要实现的功能是一个登陆模块，那作为测试组织，必须要在代码开始前就和开发团队确定这个功能的验证用例。然后测试团队需要研究自动化测试策略，选择合适的工具构建测试用例，并且把测试用例和需求文档有机地结合起来。</p>
<p>&emsp;&emsp;笔者认为，独立的测试团队需要尽可能早地建立起来有效的测试框架。当开发开始的时候，测试用例就要同步开始编写了，并且当产品每日构建或者发布的时候就执行全部测试用例，并及时给予反馈。对于自动化测试的执行和反馈周期必须在24小时以内，整个过程必须全自动，并且对于这一类发现问题，测试和研发团队要达成共识，其修复优先级要高于新功能的开发。</p>
<p>&emsp;&emsp;对于测试团队来讲，这个过程中比较难的就是自动化用例的更新和反馈周期，这里需要测试框架的制定者有一定的经验，并经常更新框架和测试用例，对于测试用例的质量也有较高的要求，建议采用类似code review的方式评审用例和框架，并采用gitlab、gerrit等合作方式提高效率。</p>
<p>&emsp;&emsp;如果无法与研发在测试自动化执行和修复的流程上达成一致，就必须要修正策略，减少自动化测试投入，加强手工测试，降低自动化测试频率，如仅仅对研发认为的稳定版本进行测试等等，但一周至少要执行一次，如果连这个频率都保证不了，建议直接放弃自动化测试。</p>
<p>&emsp;&emsp;如果整个测试团队严重缺乏自动化测试或者开发经验，建议在选择自动化测试方案的时候慎重考虑，如果确定有足够的时间来培训团队，有强有力的自动化测试领导者，可以尝试，不然建议放弃。</p>
<h3 id="测试和开发混合的团队">测试和开发混合的团队</h3>
<p>&emsp;&emsp;选择测试和开发混合组建的团队，一般采用敏捷开发的模式，对于测试自动化的接受程度较高。因此对一般的产品和项目来说，测试自动化必然是一开始就要引入的。但是从另一个角度讲，这一类的组织形式也容易产生团队间的重复工作，浪费现象严重。因此建议对于这一类型的组织，在自动化测试框架和策略方面要做到不同团队间的一致，并且不同团队共享同一份测试框架代码。另外建议有相对独立的测试自动化评审团队来验收框架代码和用例，以保证质量。</p>
<p>&emsp;&emsp;对于这一类型的组织，测试用例间的耦合性必须消除，即便是以执行时间为代价。测试用例必须尽可能独立和简洁明了，执行频率需要在所有团队上统一，如每日一次，并且不能收到某个团队的干扰。对于自动化测试发现的问题，所有团队的分析必须及时、高效。</p>
<p>&emsp;&emsp;对于这一类型的组织，建议自动化测试在执行层面上统一，各个团队不去维护执行框架，但是测试用例、测试设备和结果的维护必须由各个团队自己负责。</p>
<p>&emsp;&emsp;建议定期有相应的执行和分析报告发出\（当然最好是自动的\），以保证各个团队的工作重心不发生偏移。</p>
<p>&emsp;&emsp;虽然建议在执行层面统一，但是不意味着需要有独立的自动化测试执行团队来承担这项工作，事实上应当避免出现这样的团队。有这样的团队虽然从管理上可以带来一定的简便，但是会影响分析和测试效率，更大的影响在于让开发团队出现依赖，不再认真维护他们的测试用例。</p>
<h3 id="测试外包的团队">测试外包的团队</h3>
<p>&emsp;&emsp;这类测试一般相对独立和明确，因此什么时候引入，要不要引入测试自动化基本是确定的，关键是可维护性要求较高。笔者工作中曾经遇到一个外包的产品，自动化测试的用例基本是一个模块一种方案，而且由于稳定性问题，验收的标准被定义为在20次连续的测试中有一次可以全部通过即为通过。当后来因为产品线的问题，这个产品取消外包后，接手的团队不得不重新设计自动化测试框架和方案，并把原来的测试用例逐个分析和翻译，耗费了大量的时间。</p>
<p>&emsp;&emsp;如果外包的团队和内部团队在一起工作，那和前面的几个方式的讨论没什么区别；如果外包的团队独立工作，或者属于不同的地区和国家，那尽可能将稳定的回归测试工作外包，并要求外包团队接近100%的测试自动化率，以避免风险。</p>
<h2 id="如何决定测试自动化方案">如何决定测试自动化方案</h2>
<p>&emsp;&emsp;前面我们谈了要不要引入测试自动化，以及什么时候引入测试自动化。接下来我们具体谈一下面对特定的项目，采用什么样的测试自动化方案比较合适。</p>
<h3 id="开发流程决定测试自动化方案">开发流程决定测试自动化方案</h3>
<p>&emsp;&emsp;不同的开发流程对测试自动化方案的选择往往具有决定意义。在选择自动化测试方案前，请先仔细考虑一下，在项目采用的开发流程中，你所采用的方案能否得到大家的支持，能否顺利推行。这里笔者举一个例子来说明。</p>
<p>&emsp;&emsp;笔者目前所在的公司是一个较大的通信企业，通信行业的测试设备极为昂贵，且维护的人力成本较高。对于公司里面的任何一个团队（500人以内）来讲，它都不太可能负责某一个产品线的整个环节，往往是其中的一部分，如操作系统，如通信应用等。在选择自动化测试方案的时候往往就有两种选项：</p>
<ol>
<li>利用真实的设备，搭建接近真实的测试环境，上下游的软件都尽可能地更上其它团队的最新开发进度，然后测试自己所交付的产品在这个环境上的质量。</li>
<li>除了自己的产品外，尽可能地用模拟器，测试尽可能地简单，只覆盖自己开发的部分。</li>
</ol>
<p>&emsp;&emsp;同样地对应与上述两种方案，他们所采用的测试工具也往往会出现分歧。第一种方案往往倾向于集成的测试工具，类似LoadRunner、QTP这样的；第二种方案倾向与轻量化的测试工具，往往采用脚本语言如Python、Bash来构建他们的测试集。而在执行层面上，第一种方案往往会有独立的测试团队和工程师来负责，第二种却不一定。同时第二种方案的执行频率要高于第一种。</p>
<p>&emsp;&emsp;那么什么样的团队会倾向于选择第一种方案呢？从笔者的观察来看，如果这个团队研发和测试界限比较明显，或者有较强的测试团队，特别是系统测试团队，开发流程接近瀑布多余敏捷，那他们通常会选择方案一。相反，则多数会选择方案二。</p>
<h3 id="项目特点决定测试自动化方案">项目特点决定测试自动化方案</h3>
<p>&emsp;&emsp;不存在普遍适用的测试自动化方案，比如，对于B/S应用，在功能测试方面，Selenium就是比RobotFramework更合适的选择。但如果测试的是windows桌面应用，那他们就不合适了。再比如，如果项目是做一个通信服务，那用Python这样的脚本语言自己构建测试框架往往更好。</p>
<h3 id="工程师特点决定测试自动化方案">工程师特点决定测试自动化方案</h3>
<p>&emsp;&emsp;采用工程师熟悉的语言和平台，可以更快地推广，并得到较高质量的自动化测试用例。而如果工程师普遍开发功底较薄，那采用标记语言或者模板语言就比采用一般编程语言更合适，这也就是为什么会出现像<a href="http://robotframework.org" target="_blank" rel="external">RobotFramework</a>这样的框架的原因。笔者见过一个项目，测试自动化采用C++语言编写，而且维护效率不低，原因就是这个团队所有的工程师都精通C++语言，这个时候推广Python或者标记语言可能阻力会更大。</p>
<h2 id="测试自动化的团队组成">测试自动化的团队组成</h2>
<p>&emsp;&emsp;很多组织（无论是小公司，还是跨国公司），很容易犯的错误就是忽视自动化测试核心团队的重要性，随意拼凑人员组成这个团队，如果项目旷日持久，其带来的浪费是相当惊人的。在笔者所在公司，就见过这样的例子，两三年之后，测试自动化用例和脚本出现大量的重复，整个测试自动化脚本库几无复用性可言，测试自动化的执行被限定在特定的机器上，环境配置被几千行冗余的Bash脚本所累，抽取和剥离需要耗费几千个小时甚至更多的人力。而且由于早期策略失误，框架扩展性差，造成测试覆盖率的严重不足，交付的产品质量满足不了客户需求。</p>
<p>&emsp;&emsp;一个测试自动化核心团队可以是虚拟的，也可以是具体的团队，但是规模不应该很大，十个人左右是比较理想的情况。他们不应该负责所有测试用例的编写和维护，而应该着重于测试自动化框架和提高测试自动化开发执行效率方面。这个团队的成员必须具有足够的开发背景，能写出高质量的代码，并且有一定的测试经验，能够针对项目和团队的特点制定合适的测试自动化方案。同时，他们也需要有一定的coaching能力，能够影响广大的测试和研发团队，让他们工作在同一个自动化测试框架中，并且尽可能地避免浪费。</p>
<h2 id="没有最好的方案，只有最合适的方案">没有最好的方案，只有最合适的方案</h2>
<p>&emsp;&emsp;软件开发一直在不断地向前演进，无论是技术，还是工作方式，每个十年都有翻天覆地地变化。我们必须不断地更新自己的经验库，经常审视目前的方案，不断地优化它，改进它，使它成为最适合我们的方案。因为永远没有那个方案是最好的方案，我们只是在寻找当前对我们来说最适合的方案。</p>
]]></content>
    
    
      <category term="TA" scheme="http://feiyuw.github.io/tags/TA/"/>
    
      <category term="测试自动化" scheme="http://feiyuw.github.io/categories/%E6%B5%8B%E8%AF%95%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[夏日厦门行]]></title>
    <link href="http://feiyuw.github.io/2014/07/14/%E5%8E%A6%E9%97%A8%E8%A1%8C/"/>
    <id>http://feiyuw.github.io/2014/07/14/厦门行/</id>
    <published>2014-07-14T07:37:53.000Z</published>
    <updated>2014-07-17T07:02:40.877Z</updated>
    <content type="html"><![CDATA[<p>&emsp;&emsp;这次的旅行完全是临时起意，星期一突然产生了去厦门的想法，星期二定了火车票，买了旅行箱，星期三定下酒店，星期四就出发了。</p>
<p>&emsp;&emsp;关于旅行的目的同样是没有特别计划，关键点就两个：<strong>海滩</strong>、<strong>小吃</strong>。必须去的景点就一个：<strong>鼓浪屿</strong>。基本的宗旨是：</p>
<pre><code><span class="bullet">* </span>不赶时间
<span class="bullet">* </span>不凑热闹
<span class="bullet">* </span>不赶景点
<span class="bullet">* </span>不吃海鲜
</code></pre><p>&emsp;&emsp;先说一下整个行程，星期四早上6：30从家里出发，星期天晚上9：00到家，历时四天三晚。一家三口往返皆用动车，住宿都靠海边，总共花销3000左右，其中鼓浪屿一晚的住宿就有700多，不过还是比较值得的。</p>
<p>&emsp;&emsp;厦门七月初的天气很热了，最高温度在33～35’C左右，中午在外面已经有点受不了了，但是海水温度也上来了，可以下水游泳。天气热了，所以只带夏季的衣物和凉鞋就可以了，而三岁的女儿受《爸爸去哪儿》的影响，对海边非常向往，玩沙玩水的玩具就是必带的了。按照我最初的想法，女儿在海边玩玩沙子，踩踩水会很开心，但是应该不敢下水游泳，不过后来的事实证明小孩子的适应能力和好奇心有多么大。</p>
<h2 id="出发">出发</h2>
<p>&emsp;&emsp;杭州到厦门的动车接近7个小时，加上两头的公交等时间，基本要耗费一天的时间，而动车没有过夜的，所以从时间上来讲不太划算。我们坐的是D3131早上8：30从杭州东站开出，下午3：30左右到达厦门北站。这一天女儿早早地就起来了，我们在杭州东站吃的早饭，这样希望她可以在火车上多睡一段时间。果然，没到11：00，女儿就睡着了。小孩子虽然可以免票，但是没有座位很多时候也不方便，尤其是长途旅行的时候，毕竟三岁多的小孩已经不小了，下次出去打算给她买张儿童票了，这次枕的我们俩腿都木木的。附小家伙车上睡照一张。</p>
<p><img src="/images/crh_to.jpg" alt="动车上睡着了"></p>
<p>&emsp;&emsp;我们随行带了一个28寸的大箱子和一个背包，食物带了黄瓜、苹果、方便面和酥饼。11：00没到，两盒方便面就被女儿催着吃掉了，但是接下来的时间里黄瓜发挥了大用处，小家伙一个人就吃掉两根。回程的时候我们原也打算去菜场买点黄瓜西红柿带上，后来因时间关系放弃了，不得不说，在火车上这些东西比水果好。</p>
<h2 id="厦门北站，BRT，115路">厦门北站，BRT，115路</h2>
<p>&emsp;&emsp;厦门北站位于集美区，离厦门市中心很远，居然比机场都远，查了一下路程，差不多跟下沙到杭州市中心的距离差不多了。到达厦门是在下午3：30，一出火车站，一股热浪迎面袭来，30多度的高温，火辣辣的太阳真不是盖的。厦门北站是新修的，出站还是很快速的。</p>
<p>&emsp;&emsp;出来站，我们马上去找BRT，厦门的BRT是单独跑在高架上的，效率很高，可是北站那个上车的效率就太低了。要从厦门北站坐上B1，你得先去排队买单程票，而且一次只能买一张，当天有效，指定要去的地点，再到另一边排队等车。门口的大叔还要检查火车票，如果是电子票的，需要出示手机短信，我一直没搞明白上BRT和这个火车票有什么关系。BRT的单程票就一个塑料硬币，和一块钱差不多大。不过虽然买票有点繁琐，厦门的BRT还是很不错的，车次多，速度快，换乘方便，当然人也很多，估计以后动车改到厦门站会好一些。</p>
<p>&emsp;&emsp;B1会经过跨海大桥，女儿这时候有点困了，但还想看一下大海，跟我说，到有海的地方叫她。叫了她，看了两眼，继续睡。过跨海大桥其实离机场就不远了，已经可以看到正在降落的飞机，厦门的海水比舟山的好不少，水也比较深。</p>
<p>&emsp;&emsp;<code>东芳山庄站</code>下车，下面就是115路公交车站，与杭州相比，厦门的交通明显顺畅很多，公交车上人也要少一些，115路开了一段时间之后就上了环岛路，一路景色优美，通行迅速，我们定的旅店在黄厝，在黄厝海滨站下车。在百度地图上查询公交线路的时候，从厦门北站到黄厝海滨预计2个小时，实际上不到1个半小时，效率还是很高的。</p>
<h2 id="黄厝，青芒，沙滩，大海">黄厝，青芒，沙滩，大海</h2>
<p>&emsp;&emsp;黄厝是我们在厦门的住宿地点，它离椰风寨不远，离厦门大学几公里路，属于新近开发的家庭旅馆聚集区。由于不想曾厝垵那样在网上顶顶有名，自然物价也要平和一点，海滩上的人也少了很多，另外，这里的很多餐饮店做的都是本地居民的生意，相对于专做游客生意的要更地道一点。</p>
<p>&emsp;&emsp;我们入住的海悠悠旅店离海边很近，拐进路口几步路就到了，房间比较大，采光也不错，不过因为装修不久，还是有点味道。住的旁边就有青芒卖，立时给女儿买了一个，削好之后居然装了两盒，真够大的，6元1斤的价格也比杭州平易多了。</p>
<p>&emsp;&emsp;到酒店之后换上凉鞋短裤，乘着天还亮，带上女儿去了海边。沙滩上人不多，天气晴好，海风吹着很舒服，女儿第一次在海边玩水，还不太适应，沙子粘在脚上老让我们帮她弄掉，无语。附海边踩水照一张。</p>
<p><img src="/images/hc_beach.jpg" alt="黄厝海滩"></p>
<h2 id="金门">金门</h2>
<p>&emsp;&emsp;选择黄厝作为住宿地点的另一个原因是它离金门很近，天气好的时候直接就可以看到。下图中左侧较长的就是小金门。当年的功过是非已无从评说，但是这么近的看到它还是有点感慨，有游船可以开到更近一点的地方，但是除了观看两边的巨幅标语，也没有其他可看的了。后来据当地出租车司机说，在厦门北面的大邓，与金门是最近的，当然走私的物品也就较为丰富了，不过这一次没有时间去那里一看了。</p>
<p><img src="/images/jinmen.jpg" alt="小金门"></p>
<h2 id="脚伤">脚伤</h2>
<p>&emsp;&emsp;离海滩不远就有不少礁石，不少人会爬上去，然后一跃入水。我抱着女儿也上了其中一块。可能是旅游的新鲜感让人大意了，对滑溜溜的礁石估计不足，抱着女儿一下子摔倒了，手臂重重地装在石头上，还有女儿在怀里没有磕着。不过我就比较惨了，右臂擦破了，右脚底撕掉了一块皮肉，鲜血淋漓。</p>
<p>&emsp;&emsp;第一天就受伤让接下来的行程变得困难，匆匆回到旅店，然后出门寻找药店。在卖青芒的小伙子的指点下，顺利的找到了一个国医馆，老医生一看就给人一种很放心的感觉。说明情况，没有看伤口，给了我一盒消毒药，5块钱，便没有别的了。现在想来当时应该至少让医生检查一下，好歹开点纱布啥的，这个疏忽让我接下来几天受了不少罪。</p>
<h2 id="台湾牛肉饭，盆栽冰淇淋，海鲜粥">台湾牛肉饭，盆栽冰淇淋，海鲜粥</h2>
<p>&emsp;&emsp;路口有很多海鲜大排档，相对于舟山来说，这里的海鲜算是很便宜了。不过我们家都对海鲜兴趣不大，直接略过，向村子里面走去。黄厝村让我有一种回到滨江垃圾街的错觉，拥挤的街道，两边叫卖的摊主，街旁林林总总的小店。拐了两个弯找了一家叫做“<strong>老林家</strong>”的小餐馆，点了一份牛肉饭，一份海鲜粥，一份海鲜炒饭，总共35块钱，算是相当便宜了，而且东西还挺不错。这家店的老板很年轻，另外就是一个年轻的服务员和一个阿姨。服务员貌似是新来的，还不太熟练，不过这种慢悠悠的小店感觉挺好。在接下来的几天我们在这里吃了三顿饭，包括一份海蛎煎，不知道是材料刚采购回来的原因还是烹调技术的差异，总觉得这里的牡蛎比舟山的好了很多。</p>
<h2 id="厦门的出租车">厦门的出租车</h2>
<p>&emsp;&emsp;不知是否是被杭州糟糕的交通折磨得久了，到哪都喜欢观察一下那里的交通情况。第二天我们的目的地是鼓浪屿，原本的计划是坐那传说中的29路车，可是出来不久就看到一辆空的出租车，那便打车吧。环岛路红绿灯很少，车开得很快。厦门的出租车多是起亚，而且空车比较多，我两天打了三次车，基本没有多少等待的时间，资费比杭州便宜，从黄厝打车到厦门北站80块钱。不过厦门的出租车大都烧天然气，续航只有100多公里，如果去很远的地方的话需要考虑加气的问题。另外厦门连接各个岛的桥不少是要收费的，不过出租车一般办理了年卡，所以过桥费不用乘客负担，也是挺不错的，让我想起杭州绕城取消年卡的做法。</p>
<h2 id="第一码头，内厝奥">第一码头，内厝奥</h2>
<p>&emsp;&emsp;厦门第一码头是个挺小的码头，旁边不远就是BRT终点站，由于它太小了，以致于出租车司机都不清楚它在哪，跟旅馆老板打听才确定了它的方位。同样因为它小不知名，大部分游客都不会从那儿上鼓浪屿，也让我们省了不少排队的时间，当然去的时候船上人还是蛮多的。去内厝奥码头的船基本逢整点开，晚上没有班次，票价8元。船是上下两层的，上到上层的话需要加1元，我们当然是到上面看风景了。</p>
<p><img src="/images/first_dock.jpg" alt="驶离第一码头"><br><img src="/images/boat_to.jpg" alt="第一码头往内厝奥的船"><br><img src="/images/to_nca.jpg" alt="到达鼓浪屿内厝奥码头"></p>
<h2 id="鼓浪屿">鼓浪屿</h2>
<p>&emsp;&emsp;内厝奥同样是鼓浪屿上人相对少很多的一个码头，出来之后沿着海边走走，游客不多，店铺也不多。傍晚在海滩上漫步，或者下水，晚上静静听着海浪声，感觉真心不错。比起龙头路那边的喧嚣和热闹，这边更适合放松自己的身心。</p>
<h3 id="七里香舍">七里香舍</h3>
<p>&emsp;&emsp;预定的七里香舍酒店就在海滩边，隔壁就是别墅酒店，700多一晚的海景房真心不错，一个大阳台，楼下郁郁葱葱的植物，几条看门的土狗，还有一个金鱼池。酒店主人貌似是个佛教徒，大堂里面有很多的佛教念珠之类的物品出售，旁边的咖啡厅供应三餐，早餐赠送两人的。但是酒店的晚餐就有点贵了，比泉州路那边的咖啡馆都贵，另外就是早餐时候的烤面包机太少了，我们等不及直接就吃凉的了。</p>
<p>&emsp;&emsp;还有一个有趣的现象，酒店的前台每次一接电话总是一口地道伦敦腔：“May I help you sir?”，而与之交谈我怀疑他是不是来自台湾，这个酒店就跟厦门的很多生活状态一样，悠闲，平淡，自在。</p>
<h3 id="老建筑">老建筑</h3>
<p>&emsp;&emsp;沿鼓声路往上走，翻过花鸟元园，进入泉州路，两边就能看到很多的老建筑了。有人说鼓浪屿是万国建筑博物馆，看来所言非虚。这里坐落着很多各式各样的民国时期的小洋楼，一般都带上一个小院子。而与许多其他景点不同的是，这里的大部分建筑现在还在使用中，从而多了点生活气息，显得更为亲近。附上随拍的一张小楼照片，从照片上可以看到<code>黄赐敏故居</code>字样，网上查了一下，这个楼叫作<code>金瓜楼</code>，建成于1922年，为旅菲华侨<strong>黄赐敏先生</strong>1924年购得。</p>
<p><img src="/images/gly_building.jpg" alt="鼓浪屿上的建筑"></p>
<h3 id="龙头路">龙头路</h3>
<p>&emsp;&emsp;沿着泉州路继续往前走，接近龙头路的时候街上的行人已经是熙熙攘攘了。龙头路在网上很有名，这里坐落了很多特色的小吃店铺，和一些有特色的工艺品点，但是严格来说，和其它的许多步行街相比，没有什么特色，这样的景色在苏州观前街这样的地方也都类似。</p>
<h3 id="黄金香，张三疯">黄金香，张三疯</h3>
<p>&emsp;&emsp;来之前有同事让帮忙在鼓浪屿上带一点猪肉脯回去，所以<strong>黄金香</strong>是必须要去的。与传说中一样，龙头路95号上很小的店面，大块的猪肉脯随便试吃，100块钱8包，送一个实用的旅行包。不过可能是天气太热的缘故，并没有太多的人在买，我们挑了4包猪肉脯，4包牛肉干肉松之类的东西就离开了。没有什么目的，也没有遵循网上的攻略，一路上走走停停，先后买了<strong>第七铺</strong>的牛轧糖，张三疯的奶茶，还有香草冰淇淋。牛轧糖和奶茶都不错，特别是那个奶茶，有茶叶淡淡的苦味，不过喝起来非常顺口，我们全家都对它赞不绝口。但是臭豆腐就很一般了，不如苏州山塘街的，也不如绍兴臭豆腐。</p>
<h3 id="厦门的高楼">厦门的高楼</h3>
<p>&emsp;&emsp;沿着海边慢慢溜达，脚伤还是严重影响了我的行动，我们走得很慢，鼓浪屿与厦门本岛最近的地方估计只有几百米，海边有不少兜售小东西的商贩，还有一个吹笛子的大叔，一曲《上海滩》听着荡气回肠。从鼓浪屿向厦门看去，可以看到一座很高的楼，怀疑是不是传说中的厦门国际中心。</p>
<p><img src="/images/top_building.jpg" alt="高楼"></p>
<h3 id="内厝奥的海滩">内厝奥的海滩</h3>
<p>&emsp;&emsp;走着走着女儿睡着了，而天气也实在太热了，我们便返回酒店休息，一直到5：00多出来去海边玩沙子。内厝奥的海滩人不多，也比较干净，可能是水比较深的缘故，这里的海水还算清澈。女儿带着小桶等一堆玩沙的东西来到了沙滩上，边上有一些人在游泳，远处能看到大船经过。夕阳下，吹着海风，携妻带女在沙滩上散步，感觉真好！</p>
<p><img src="/images/play_sand.jpg" alt="玩沙子"><br><img src="/images/walk_on_gly_beach.jpg" alt="海边漫步"><br><img src="/images/huge_ship.jpg" alt="大船"></p>
<h2 id="再回黄厝">再回黄厝</h2>
<p>&emsp;&emsp;晚饭直接在酒店咖啡厅解决了，第二天的早饭也一样，我们睡到自然醒，然后不紧不慢地吃早饭，收拾行李，退房。等走到内厝奥码头的时候，刚好有一艘返回钢琴码头的船要开。这次船上人很少，上到二层也没有额外收费。</p>
<p>&emsp;&emsp;打车回黄厝，还是住在原来的房间里。先去外面买回一堆吃的，然后吃东西，午休，避暑。</p>
<p>&emsp;&emsp;帮女儿换上泳衣，带上泳圈，涂上防晒霜，下海啦，虽然我的脚一下水就疼得厉害，但是好歹不虚此行吧。女儿刚开始下水的时候身体还有点僵硬，慢慢就放开了，小脚在水里扑腾着，小手划着，很有那么点意思。</p>
<p><img src="/images/swim_1.jpg" alt="游泳1"><br><img src="/images/swim_2.jpg" alt="游泳2"></p>
<h2 id="归杭">归杭</h2>
<p>&emsp;&emsp;晚上仍然去<strong>老林家</strong>吃饭，出来又去超市里买了三个芒果带回家，这里的芒果大部分不到6元1斤，比杭州便宜了很多，物流成本很高啊！</p>
<p>&emsp;&emsp;路边有荔枝在卖，3元1斤，老婆买了十几块钱，一大袋子，可就这一大袋子，我几乎没吃到，都被她们娘儿俩解决了。</p>
<p>&emsp;&emsp;第二天睡到自然醒，老林家吃早饭，尝了一下海蛎煎，很赞！打车去厦门北站，80块钱，40多分钟就到了，厦门的交通真好！D3206返杭，旅程结束，回归工作啦！</p>
]]></content>
    
    
      <category term="旅行" scheme="http://feiyuw.github.io/tags/%E6%97%85%E8%A1%8C/"/>
    
      <category term="旅行" scheme="http://feiyuw.github.io/categories/%E6%97%85%E8%A1%8C/"/>
    
  </entry>
  
</feed>
